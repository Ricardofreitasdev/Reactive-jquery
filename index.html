<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recriando o Jquery com reatividade</title>
    <link rel="shortcut icon" href="./public/favicon.ico">
    <link rel="stylesheet" href="style.css">
</head>

<body class="container">
    <template id="dinner-table-template">
        <table>
            <tr>
                <td>Jantar:</td>
                <td>R$ $dinnerPrice</td>
                <td>
                    <button data-action="incrementDinner">+</button>
                    <button data-action="decrementDinner">-</button>
                </td>
            </tr>
            <tr>
                <td>Taxa de Gar√ßom:</td>
                <td>% $tipPrice</td>
                <td>
                    <button data-action="incrementTip">+</button>
                    <button :style="$shouldInactiveButton ? 'display: none' : 'display: inline'"
                        data-action="decrementTip">-</button>
                </td>
            </tr>
            <tr>
                <td>Total:</td>
                <td colspan="2">$total</td>
            </tr>
        </table>
    </template>

    <script type="module">
        import { $ } from "./src/Jquery.js";

        $('.container')
            .append('<div id="app"></div>')

        $('#app').reactive({
            templateId: '#dinner-table-template',
            config: {
                data: {
                    dinnerPrice: 100,
                    tipPrice: 10,
                },
                actions: {
                    incrementDinner: function () {
                        this.dinnerPrice++;
                    },
                    decrementDinner: function () {
                        this.dinnerPrice--;
                    },
                    incrementTip: function () {
                        this.tipPrice++;
                    },
                    decrementTip: function () {
                        this.tipPrice--;
                    },
                },
                computed: {
                    total: function () {
                        const total = this.dinnerPrice + (this.dinnerPrice * this.tipPrice / 100);
                        return total.toLocaleString('pt-BR', {style: 'currency', currency: 'BRL'});

                    },
                    shouldInactiveButton: function () {
                        return this.tipPrice <= 0;
                    }
                }
            },
            persist: true
        });

    </script>
</body>

</html>